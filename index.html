<!doctype html>
<html lang="bn">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>লোকাল ডিলস ম্যাপ</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<style>
  body{margin:0;font-family:sans-serif}
  #map{height:90vh;width:100%}
  .filter-bar{padding:8px;background:#f8fafc;border-bottom:1px solid #ddd;display:flex;gap:8px;flex-wrap:wrap}
  select{padding:6px;border-radius:6px;border:1px solid #ccc}
</style>
<body>
<div class="filter-bar">
  <label>ক্যাটাগরি:
    <select id="categoryFilter">
      <option value="all">সব</option>
      <option value="restaurant">রেস্টুরেন্ট</option>
      <option value="clothing">পোশাক</option>
      <option value="electronics">ইলেকট্রনিক্স</option>
    </select>
  </label>
</div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
// ম্যাপ সেটআপ (Pune কেন্দ্র করে)
const map = L.map('map').setView([18.5204, 73.8567], 13);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

// ডেমো মার্চেন্ট ডেটা
const merchants = [
  {name:"Spice Hub", category:"restaurant", offer:"20% ছাড় Lunch Combo", lat:18.5209, lng:73.8545},
  {name:"Trendy Threads", category:"clothing", offer:"Buy 1 Get 1 Free", lat:18.5185, lng:73.8620},
  {name:"Gadget World", category:"electronics", offer:"₹500 ছাড় ₹5000+ কেনাকাটায়", lat:18.5250, lng:73.8500},
  {name:"Cafe Aroma", category:"restaurant", offer:"ফ্রি ডেজার্ট Dinner-এ", lat:18.5220, lng:73.8580}
];

// মার্কার লেয়ার গ্রুপ
let markersLayer = L.layerGroup().addTo(map);

function renderMarkers(filterCat){
  markersLayer.clearLayers();
  merchants
    .filter(m => filterCat==="all" || m.category===filterCat)
    .forEach(m => {
      const marker = L.marker([m.lat, m.lng]).addTo(markersLayer);
      marker.bindPopup(`<b>${m.name}</b><br>${m.offer}<br><i>${m.category}</i>`);
    });
}

// ফিল্টার চেঞ্জ
document.getElementById('categoryFilter').addEventListener('change', e=>{
  renderMarkers(e.target.value);
});

// প্রথমবার সব দেখানো
renderMarkers("all");
</script>
</body>
</html>
